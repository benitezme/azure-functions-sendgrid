{"dependencies":[{"name":"/Users/barrylow/Business/AdvancedAlgos/AlgobotsCommunity/azure-functions-sendgrid/package.json","includedInParent":true,"mtime":1528879575000}],"generated":{"js":"var e=require(\"axios\");module.exports=function(s,t){if(s.log(\"Node.js HTTP trigger function processed a request. RequestUri=%s\",t.originalUrl),t.body&&t.body.email){e.post({method:\"post\",url:\"https://api.sendgrid.com/v3/contactdb/recipients\",data:{email:t.body.email},headers:{\"content-type\":\"application/json\",authorization:\"Bearer\"+void 0}}).then(function(e){s.res={body:\"Success: Added \"+t.body.email+e.persisted_recipients[0]}}).catch(function(e){s.res={status:400,body:\"Error: \"+e}})}else s.res={status:400,body:\"Please pass an email address in the request body\"+s.res};s.done()};","map":{"mappings":[{"generated":{"line":1,"column":0},"source":"function.js","original":{"line":1,"column":0}},{"name":"axios","generated":{"line":1,"column":4},"source":"function.js","original":{"line":1,"column":4}},{"name":"require","generated":{"line":1,"column":12},"source":"function.js","original":{"line":1,"column":12}},{"generated":{"line":1,"column":20},"source":"function.js","original":{"line":1,"column":20}},{"generated":{"line":1,"column":27},"source":"function.js","original":{"line":1,"column":12}},{"generated":{"line":1,"column":28},"source":"function.js","original":{"line":1,"column":0}},{"name":"module","generated":{"line":3,"column":0},"source":"function.js","original":{"line":3,"column":0}},{"name":"exports","generated":{"line":3,"column":7},"source":"function.js","original":{"line":3,"column":7}},{"generated":{"line":3,"column":14},"source":"function.js","original":{"line":3,"column":0}},{"generated":{"line":3,"column":17},"source":"function.js","original":{"line":3,"column":17}},{"name":"context","generated":{"line":3,"column":27},"source":"function.js","original":{"line":3,"column":26}},{"generated":{"line":3,"column":34},"source":"function.js","original":{"line":3,"column":17}},{"name":"req","generated":{"line":3,"column":36},"source":"function.js","original":{"line":3,"column":35}},{"generated":{"line":3,"column":39},"source":"function.js","original":{"line":3,"column":17}},{"generated":{"line":3,"column":41},"source":"function.js","original":{"line":3,"column":40}},{"name":"context","generated":{"line":4,"column":0},"source":"function.js","original":{"line":4,"column":4}},{"name":"log","generated":{"line":4,"column":12},"source":"function.js","original":{"line":4,"column":12}},{"generated":{"line":4,"column":15},"source":"function.js","original":{"line":4,"column":4}},{"generated":{"line":4,"column":16},"source":"function.js","original":{"line":4,"column":16}},{"generated":{"line":4,"column":82},"source":"function.js","original":{"line":4,"column":4}},{"name":"req","generated":{"line":4,"column":84},"source":"function.js","original":{"line":4,"column":84}},{"name":"originalUrl","generated":{"line":4,"column":88},"source":"function.js","original":{"line":4,"column":88}},{"generated":{"line":4,"column":99},"source":"function.js","original":{"line":4,"column":4}},{"generated":{"line":6,"column":0},"source":"function.js","original":{"line":6,"column":4}},{"name":"req","generated":{"line":6,"column":8},"source":"function.js","original":{"line":6,"column":8}},{"name":"body","generated":{"line":6,"column":12},"source":"function.js","original":{"line":6,"column":12}},{"generated":{"line":6,"column":16},"source":"function.js","original":{"line":6,"column":8}},{"name":"req","generated":{"line":6,"column":20},"source":"function.js","original":{"line":6,"column":20}},{"name":"body","generated":{"line":6,"column":24},"source":"function.js","original":{"line":6,"column":24}},{"generated":{"line":6,"column":28},"source":"function.js","original":{"line":6,"column":20}},{"name":"email","generated":{"line":6,"column":29},"source":"function.js","original":{"line":6,"column":29}},{"generated":{"line":6,"column":34},"source":"function.js","original":{"line":6,"column":4}},{"generated":{"line":6,"column":36},"source":"function.js","original":{"line":6,"column":36}},{"generated":{"line":8,"column":0},"source":"function.js","original":{"line":8,"column":8}},{"name":"API_KEY","generated":{"line":8,"column":12},"source":"function.js","original":{"line":8,"column":12}},{"generated":{"line":8,"column":31},"source":"function.js","original":{"line":8,"column":8}},{"name":"axios","generated":{"line":10,"column":0},"source":"function.js","original":{"line":10,"column":8}},{"name":"post","generated":{"line":10,"column":14},"source":"function.js","original":{"line":10,"column":14}},{"generated":{"line":10,"column":18},"source":"function.js","original":{"line":10,"column":8}},{"generated":{"line":10,"column":19},"source":"function.js","original":{"line":10,"column":19}},{"name":"method","generated":{"line":11,"column":0},"source":"function.js","original":{"line":11,"column":12}},{"generated":{"line":11,"column":20},"source":"function.js","original":{"line":11,"column":20}},{"generated":{"line":11,"column":26},"source":"function.js","original":{"line":10,"column":19}},{"name":"url","generated":{"line":12,"column":0},"source":"function.js","original":{"line":12,"column":12}},{"generated":{"line":12,"column":17},"source":"function.js","original":{"line":12,"column":17}},{"generated":{"line":12,"column":67},"source":"function.js","original":{"line":10,"column":19}},{"name":"data","generated":{"line":13,"column":0},"source":"function.js","original":{"line":13,"column":12}},{"generated":{"line":13,"column":18},"source":"function.js","original":{"line":13,"column":18}},{"name":"email","generated":{"line":14,"column":0},"source":"function.js","original":{"line":14,"column":16}},{"name":"req","generated":{"line":14,"column":23},"source":"function.js","original":{"line":14,"column":23}},{"name":"body","generated":{"line":14,"column":27},"source":"function.js","original":{"line":14,"column":27}},{"generated":{"line":14,"column":31},"source":"function.js","original":{"line":14,"column":23}},{"name":"email","generated":{"line":14,"column":32},"source":"function.js","original":{"line":14,"column":32}},{"generated":{"line":15,"column":0},"source":"function.js","original":{"line":13,"column":18}},{"generated":{"line":15,"column":13},"source":"function.js","original":{"line":10,"column":19}},{"name":"headers","generated":{"line":16,"column":0},"source":"function.js","original":{"line":16,"column":12}},{"generated":{"line":16,"column":21},"source":"function.js","original":{"line":16,"column":20}},{"generated":{"line":17,"column":0},"source":"function.js","original":{"line":17,"column":16}},{"generated":{"line":17,"column":32},"source":"function.js","original":{"line":17,"column":32}},{"generated":{"line":17,"column":50},"source":"function.js","original":{"line":16,"column":20}},{"generated":{"line":18,"column":0},"source":"function.js","original":{"line":18,"column":16}},{"generated":{"line":18,"column":33},"source":"function.js","original":{"line":18,"column":33}},{"name":"API_KEY","generated":{"line":18,"column":44},"source":"function.js","original":{"line":18,"column":44}},{"generated":{"line":19,"column":0},"source":"function.js","original":{"line":16,"column":20}},{"generated":{"line":20,"column":0},"source":"function.js","original":{"line":10,"column":19}},{"generated":{"line":20,"column":9},"source":"function.js","original":{"line":10,"column":8}},{"name":"then","generated":{"line":20,"column":11},"source":"function.js","original":{"line":21,"column":9}},{"generated":{"line":20,"column":15},"source":"function.js","original":{"line":10,"column":8}},{"generated":{"line":20,"column":16},"source":"function.js","original":{"line":21,"column":14}},{"name":"response","generated":{"line":20,"column":26},"source":"function.js","original":{"line":21,"column":24}},{"generated":{"line":20,"column":34},"source":"function.js","original":{"line":21,"column":14}},{"generated":{"line":20,"column":36},"source":"function.js","original":{"line":21,"column":34}},{"name":"context","generated":{"line":21,"column":0},"source":"function.js","original":{"line":22,"column":12}},{"name":"res","generated":{"line":21,"column":20},"source":"function.js","original":{"line":22,"column":20}},{"generated":{"line":21,"column":23},"source":"function.js","original":{"line":22,"column":12}},{"generated":{"line":21,"column":26},"source":"function.js","original":{"line":22,"column":26}},{"generated":{"line":22,"column":0},"source":"function.js","original":{"line":23,"column":16}},{"name":"body","generated":{"line":23,"column":0},"source":"function.js","original":{"line":24,"column":16}},{"generated":{"line":23,"column":22},"source":"function.js","original":{"line":24,"column":22}},{"name":"req","generated":{"line":23,"column":42},"source":"function.js","original":{"line":24,"column":42}},{"name":"body","generated":{"line":23,"column":46},"source":"function.js","original":{"line":24,"column":46}},{"generated":{"line":23,"column":50},"source":"function.js","original":{"line":24,"column":42}},{"name":"email","generated":{"line":23,"column":51},"source":"function.js","original":{"line":24,"column":51}},{"generated":{"line":23,"column":56},"source":"function.js","original":{"line":24,"column":22}},{"name":"response","generated":{"line":23,"column":59},"source":"function.js","original":{"line":24,"column":59}},{"name":"persisted_recipients","generated":{"line":23,"column":68},"source":"function.js","original":{"line":24,"column":68}},{"generated":{"line":23,"column":88},"source":"function.js","original":{"line":24,"column":59}},{"generated":{"line":23,"column":89},"source":"function.js","original":{"line":24,"column":89}},{"generated":{"line":23,"column":90},"source":"function.js","original":{"line":24,"column":59}},{"generated":{"line":24,"column":0},"source":"function.js","original":{"line":22,"column":26}},{"generated":{"line":24,"column":13},"source":"function.js","original":{"line":22,"column":12}},{"generated":{"line":25,"column":0},"source":"function.js","original":{"line":26,"column":9}},{"generated":{"line":25,"column":9},"source":"function.js","original":{"line":10,"column":8}},{"name":"catch","generated":{"line":25,"column":11},"source":"function.js","original":{"line":27,"column":9}},{"generated":{"line":25,"column":16},"source":"function.js","original":{"line":10,"column":8}},{"generated":{"line":25,"column":17},"source":"function.js","original":{"line":27,"column":15}},{"name":"error","generated":{"line":25,"column":27},"source":"function.js","original":{"line":27,"column":25}},{"generated":{"line":25,"column":32},"source":"function.js","original":{"line":27,"column":15}},{"generated":{"line":25,"column":34},"source":"function.js","original":{"line":27,"column":32}},{"name":"context","generated":{"line":26,"column":0},"source":"function.js","original":{"line":28,"column":12}},{"name":"res","generated":{"line":26,"column":20},"source":"function.js","original":{"line":28,"column":20}},{"generated":{"line":26,"column":23},"source":"function.js","original":{"line":28,"column":12}},{"generated":{"line":26,"column":26},"source":"function.js","original":{"line":28,"column":26}},{"name":"status","generated":{"line":27,"column":0},"source":"function.js","original":{"line":29,"column":16}},{"generated":{"line":27,"column":24},"source":"function.js","original":{"line":29,"column":24}},{"generated":{"line":27,"column":27},"source":"function.js","original":{"line":28,"column":26}},{"name":"body","generated":{"line":28,"column":0},"source":"function.js","original":{"line":30,"column":16}},{"generated":{"line":28,"column":22},"source":"function.js","original":{"line":30,"column":22}},{"name":"error","generated":{"line":28,"column":34},"source":"function.js","original":{"line":30,"column":34}},{"generated":{"line":29,"column":0},"source":"function.js","original":{"line":28,"column":26}},{"generated":{"line":29,"column":13},"source":"function.js","original":{"line":28,"column":12}},{"generated":{"line":30,"column":0},"source":"function.js","original":{"line":32,"column":9}},{"generated":{"line":30,"column":9},"source":"function.js","original":{"line":10,"column":8}},{"generated":{"line":31,"column":0},"source":"function.js","original":{"line":33,"column":5}},{"generated":{"line":31,"column":5},"source":"function.js","original":{"line":6,"column":4}},{"generated":{"line":31,"column":11},"source":"function.js","original":{"line":34,"column":9}},{"name":"context","generated":{"line":32,"column":0},"source":"function.js","original":{"line":35,"column":8}},{"name":"res","generated":{"line":32,"column":16},"source":"function.js","original":{"line":35,"column":16}},{"generated":{"line":32,"column":19},"source":"function.js","original":{"line":35,"column":8}},{"generated":{"line":32,"column":22},"source":"function.js","original":{"line":35,"column":22}},{"name":"status","generated":{"line":33,"column":0},"source":"function.js","original":{"line":36,"column":12}},{"generated":{"line":33,"column":20},"source":"function.js","original":{"line":36,"column":20}},{"generated":{"line":33,"column":23},"source":"function.js","original":{"line":35,"column":22}},{"name":"body","generated":{"line":34,"column":0},"source":"function.js","original":{"line":37,"column":12}},{"generated":{"line":34,"column":18},"source":"function.js","original":{"line":37,"column":18}},{"name":"context","generated":{"line":34,"column":71},"source":"function.js","original":{"line":37,"column":71}},{"name":"res","generated":{"line":34,"column":79},"source":"function.js","original":{"line":37,"column":79}},{"generated":{"line":35,"column":0},"source":"function.js","original":{"line":35,"column":22}},{"generated":{"line":35,"column":9},"source":"function.js","original":{"line":35,"column":8}},{"generated":{"line":36,"column":0},"source":"function.js","original":{"line":39,"column":5}},{"name":"context","generated":{"line":37,"column":0},"source":"function.js","original":{"line":40,"column":4}},{"name":"done","generated":{"line":37,"column":12},"source":"function.js","original":{"line":40,"column":12}},{"generated":{"line":37,"column":16},"source":"function.js","original":{"line":40,"column":4}},{"generated":{"line":38,"column":0},"source":"function.js","original":{"line":41,"column":1}},{"generated":{"line":38,"column":1},"source":"function.js","original":{"line":3,"column":0}}],"sources":{"function.js":"var axios = require('axios');\n\nmodule.exports = function(context, req) {\n    context.log('Node.js HTTP trigger function processed a request. RequestUri=%s', req.originalUrl);\n\n    if (req.body && req.body.email) {\n\n        var API_KEY = process.env.SG_APIKEY;\n\n        axios.post({\n            method: 'post',\n            url: 'https://api.sendgrid.com/v3/contactdb/recipients',\n            data: {\n                email: req.body.email\n            },\n            headers:{\n                'content-type': 'application/json',\n                'authorization': 'Bearer' + API_KEY\n            }\n        })\n        .then(function (response) {\n            context.res = {\n                // status defaults to 200 */\n                body: \"Success: Added \" + req.body.email + response.persisted_recipients[0]\n            };\n        })\n        .catch(function (error) {\n            context.res = {\n                status: 400,\n                body: \"Error: \" + error\n            };\n        });\n    }\n    else {\n        context.res = {\n            status: 400,\n            body: \"Please pass an email address in the request body\" + context.res\n        };\n    }\n    context.done();\n};\n\n"},"lineCount":null}},"hash":"f9cd4b0b595b9d1b49df8932a5aa6554","cacheData":{"env":{}}}