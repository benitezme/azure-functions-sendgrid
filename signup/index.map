{"version":3,"sources":["function.js"],"names":["axios","require","module","exports","context","req","log","originalUrl","body","email","API_KEY","post","method","url","data","headers","then","response","res","persisted_recipients","catch","error","status","done"],"mappings":";AAAA,IAAIA,QAAQC,QAAQ,OAAR,CAAZ;;AAEAC,OAAOC,OAAP,GAAiB,UAASC,OAAT,EAAkBC,GAAlB,EAAuB;AACpCD,YAAQE,GAAR,CAAY,kEAAZ,EAAgFD,IAAIE,WAApF;;AAEA,QAAIF,IAAIG,IAAJ,IAAYH,IAAIG,IAAJ,CAASC,KAAzB,EAAgC;;AAE5B,YAAIC,mBAAJ;;AAEAV,cAAMW,IAAN,CAAW;AACPC,oBAAQ,MADD;AAEPC,iBAAK,kDAFE;AAGPC,kBAAM;AACFL,uBAAOJ,IAAIG,IAAJ,CAASC;AADd,aAHC;AAMPM,qBAAQ;AACJ,gCAAgB,kBADZ;AAEJ,iCAAiB,WAAWL;AAFxB;AAND,SAAX,EAWCM,IAXD,CAWM,UAAUC,QAAV,EAAoB;AACtBb,oBAAQc,GAAR,GAAc;AACV;AACAV,sBAAM,oBAAoBH,IAAIG,IAAJ,CAASC,KAA7B,GAAqCQ,SAASE,oBAAT,CAA8B,CAA9B;AAFjC,aAAd;AAIH,SAhBD,EAiBCC,KAjBD,CAiBO,UAAUC,KAAV,EAAiB;AACpBjB,oBAAQc,GAAR,GAAc;AACVI,wBAAQ,GADE;AAEVd,sBAAM,YAAYa;AAFR,aAAd;AAIH,SAtBD;AAuBH,KA3BD,MA4BK;AACDjB,gBAAQc,GAAR,GAAc;AACVI,oBAAQ,GADE;AAEVd,kBAAM,qDAAqDJ,QAAQc;AAFzD,SAAd;AAIH;AACDd,YAAQmB,IAAR;AACH,CAtCD","file":"index.map","sourceRoot":"","sourcesContent":["var axios = require('axios');\n\nmodule.exports = function(context, req) {\n    context.log('Node.js HTTP trigger function processed a request. RequestUri=%s', req.originalUrl);\n\n    if (req.body && req.body.email) {\n\n        var API_KEY = process.env.SG_APIKEY;\n\n        axios.post({\n            method: 'post',\n            url: 'https://api.sendgrid.com/v3/contactdb/recipients',\n            data: {\n                email: req.body.email\n            },\n            headers:{\n                'content-type': 'application/json',\n                'authorization': 'Bearer' + API_KEY\n            }\n        })\n        .then(function (response) {\n            context.res = {\n                // status defaults to 200 */\n                body: \"Success: Added \" + req.body.email + response.persisted_recipients[0]\n            };\n        })\n        .catch(function (error) {\n            context.res = {\n                status: 400,\n                body: \"Error: \" + error\n            };\n        });\n    }\n    else {\n        context.res = {\n            status: 400,\n            body: \"Please pass an email address in the request body\" + context.res\n        };\n    }\n    context.done();\n};\n\n"]}